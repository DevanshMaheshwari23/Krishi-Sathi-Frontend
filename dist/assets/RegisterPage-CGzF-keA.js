import{c as C,u as S,b as E,r as n,j as e,U as I,B as L,L as A,z as c}from"./index-DguWN4vU.js";import{u as z,a as B,o as R,_,s as l}from"./zod-DQ1auG_0.js";import{a as F}from"./api-CjXNmGHq.js";import{I as i}from"./Input-RXoSGTuU.js";import{W as M,L as u,E as f}from"./wheat-Da6g1RNx.js";import{M as W}from"./mail-CwAkgUFa.js";import{E as b}from"./eye-BehaAQu1.js";import{C as U}from"./circle-check-Cgm6Tw2O.js";const $=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],q=C("shopping-cart",$),D=R({name:l().min(2,"Name must be at least 2 characters"),email:l().email("Enter a valid email"),password:l().min(6,"Password must be at least 6 characters"),confirmPassword:l().min(6,"Confirm your password"),role:_(["farmer","buyer"])}).refine(r=>r.password===r.confirmPassword,{path:["confirmPassword"],message:"Passwords do not match"}),X=()=>{const r=S(),{login:g}=E(),[w,m]=n.useState(!1),[d,j]=n.useState(!1),[p,v]=n.useState(!1),{register:a,handleSubmit:N,watch:y,formState:{errors:t}}=z({resolver:B(D),defaultValues:{role:"farmer"}}),x=y("role"),k=async s=>{m(!0);const h=c.loading("Creating account...");try{const o=await F.post("/auth/register",{name:s.name,email:s.email,password:s.password,role:s.role});g(o.data.user,o.data.token),c.success("Account created",{id:h}),r("/dashboard",{replace:!0})}catch(o){const P=o;c.error(P.response?.data?.message||"Registration failed",{id:h})}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen px-4 py-10 sm:px-6",children:e.jsxs("div",{className:"mx-auto grid w-full max-w-6xl gap-8 lg:grid-cols-2",children:[e.jsxs("section",{className:"surface-card p-6 sm:p-8 order-2 lg:order-1",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm font-semibold text-soft",children:"Create account"}),e.jsx("h1",{className:"mt-2 text-3xl font-bold",children:"Get started"}),e.jsx("p",{className:"mt-1 text-muted",children:"Set up your role and credentials."})]}),e.jsxs("form",{onSubmit:N(k),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"field-label",children:"I am joining as"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:`cursor-pointer rounded-[var(--radius-md)] border p-4 transition ${x==="farmer"?"border-[var(--primary)] bg-[var(--primary-soft)]":"border-[var(--border)] bg-[var(--surface-muted)]"}`,children:[e.jsx("input",{type:"radio",value:"farmer",className:"sr-only",...a("role")}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsx(M,{className:"h-4 w-4"})," Farmer"]})]}),e.jsxs("label",{className:`cursor-pointer rounded-[var(--radius-md)] border p-4 transition ${x==="buyer"?"border-[var(--primary)] bg-[var(--primary-soft)]":"border-[var(--border)] bg-[var(--surface-muted)]"}`,children:[e.jsx("input",{type:"radio",value:"buyer",className:"sr-only",...a("role")}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[e.jsx(q,{className:"h-4 w-4"})," Buyer"]})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"pointer-events-none absolute left-3 top-10 h-4 w-4 text-soft"}),e.jsx(i,{label:"Full Name",placeholder:"Ravi Kumar",className:"pl-10",error:t.name?.message,...a("name")})]}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"pointer-events-none absolute left-3 top-10 h-4 w-4 text-soft"}),e.jsx(i,{label:"Email",type:"email",placeholder:"you@example.com",className:"pl-10",error:t.email?.message,...a("email")})]}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"pointer-events-none absolute left-3 top-10 h-4 w-4 text-soft"}),e.jsx(i,{label:"Password",type:d?"text":"password",className:"pl-10 pr-10",error:t.password?.message,...a("password")}),e.jsx("button",{type:"button",onClick:()=>j(s=>!s),className:"absolute right-3 top-10 text-soft hover:text-[var(--text)]",children:d?e.jsx(f,{className:"h-4 w-4"}):e.jsx(b,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"pointer-events-none absolute left-3 top-10 h-4 w-4 text-soft"}),e.jsx(i,{label:"Confirm Password",type:p?"text":"password",className:"pl-10 pr-10",error:t.confirmPassword?.message,...a("confirmPassword")}),e.jsx("button",{type:"button",onClick:()=>v(s=>!s),className:"absolute right-3 top-10 text-soft hover:text-[var(--text)]",children:p?e.jsx(f,{className:"h-4 w-4"}):e.jsx(b,{className:"h-4 w-4"})})]}),e.jsx(L,{type:"submit",loading:w,fullWidth:!0,children:"Create account"})]}),e.jsxs("p",{className:"mt-6 text-sm text-muted",children:["Already have an account?"," ",e.jsx(A,{to:"/login",className:"font-semibold text-[var(--primary)] hover:underline",children:"Sign in"})]})]}),e.jsxs("section",{className:"hero-panel relative overflow-hidden px-8 py-10 order-1 lg:order-2",children:[e.jsx("div",{className:"grid-overlay absolute inset-0"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"pill bg-white/20 text-white border-white/30",children:"Build your digital farm workflow"}),e.jsx("h2",{className:"mt-5 text-4xl font-extrabold leading-tight text-white md:text-5xl",children:"Join the network powering better agricultural outcomes"}),e.jsx("p",{className:"mt-4 max-w-xl text-white/90",children:"Create your account to publish listings, receive market intelligence, and use AI guidance for crop operations."}),e.jsx("div",{className:"mt-10 space-y-3",children:["AI-based market and crop insights","Direct farmer-buyer connection","Step-based listing workflow","Profile and activity tracking"].map(s=>e.jsxs("div",{className:"flex items-center gap-2 rounded-[var(--radius-md)] bg-white/10 px-3 py-2 text-sm text-white/95",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{children:s})]},s))})]})]})]})})};export{X as RegisterPage};
